<div class="energy-comparison-group">
  <page-common title="能耗对比组" :showSearch="true">
    <template v-slot:pageSearch>
      <div class="flex" style="padding-bottom: 16px; justify-content: end">
        <el-button type="primary" @click="onAddDialogShow" size="small">新 增</el-button>
      </div>
    </template>
    <template v-slot:pageContent>
      <!-- 表格 start -->
      <div class="table-container" v-loading="loading" style="height: calc(100% - 13px)">
        <el-table :data="dataSource" v-show="!loading" style="width: 100%">
          <el-table-column prop="index" label="序号" width="80" align="center">
            <template #default="scope"
              >{{ (queryParams.pageNum - 1) * queryParams.pageSize + scope.$index + 1 }}</template
            >
          </el-table-column>
          <el-table-column prop="name" label="分组名称" align="center" :show-overflow-tooltip="true"> </el-table-column>
          <el-table-column prop="treeName" label="原节点" align="center" :show-overflow-tooltip="true">
          </el-table-column>
          <el-table-column prop="contrastTreeName" label="对比节点" align="center" :show-overflow-tooltip="true">
          </el-table-column>
          <el-table-column prop="energyName" label="分类分项" align="center" :show-overflow-tooltip="true">
          </el-table-column>
          <el-table-column label="操作" align="center" width="180">
            <template #default="scope">
              <span class="operate-span mr16" @click="editComparison(scope.row)">编辑</span>
              <span class="delete-span" @click="deleteComparison(scope.row.id)">删除</span>
            </template>
          </el-table-column>
        </el-table>
        <ems-pagination
          v-show="!loading && total>0"
          :current-page="queryParams.pageNum"
          :page-sizes="pageSizes"
          @size-change="onPageSizeChange"
          @current-change="onCurrentChange"
          :page-size="queryParams.pageSize"
          :total="total"
        ></ems-pagination>
      </div>
      <!-- 表格 end -->
    </template>
  </page-common>
  <!-- 新增/编辑 弹窗 start -->
  <add-and-edit-dialog
    ref="addAndEditForm"
    :compareGroupDetail="compareGroupDetail"
    :isAddFlag="isAddFlag"
    @success="onSuccess"
    :key="nums"
    :dialogOpen="dialogOpen"
    :energyTopLevelList="energyTopLevelList"
  >
  </add-and-edit-dialog>
</div>
