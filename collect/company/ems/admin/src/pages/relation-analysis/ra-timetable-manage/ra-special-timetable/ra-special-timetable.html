<div class="ra-special-timetable">
  <div :class="['ra-special-timetable--header', isSettingFlag ? 'flex-row-end-end' : 'flex-row-justify-center']">
    <el-form :inline="true" @submit.native.prevent v-show="!isSettingFlag">
      <el-form-item label="日期选择">
        <el-date-picker
          placeholder="请选择"
          v-model="date"
          type="daterange"
          range-separator="~"
          start-placeholder="开始日期"
          end-placeholder="结束日期"
        >
        </el-date-picker>
      </el-form-item>
      <el-form-item>
        <button primary @click="onSearch">查询</button>
        <button @click="onReset">重置</button>
      </el-form-item>
    </el-form>
    <button primary :disabled="settingTreeList?.length === 0" @click="onAddDialogShow" v-show="isSettingFlag">
      新 增
    </button>
  </div>
  <div class="ra-special-timetable--content">
    <el-table :data="dataSource" style="width: 100%" v-loading="loading">
      <el-table-column prop="index" label="序号" width="80" align="center">
        <template #default="scope"> {{ (queryForm.pageNum - 1) * queryForm.pageSize + scope.$index + 1 }} </template>
      </el-table-column>
      <el-table-column prop="date" label="日期" align="center" show-overflow-tooltip> </el-table-column>
      <el-table-column prop="morningStart" label="上午" align="center" show-overflow-tooltip>
        <template #default="scope">
          <span>{{ scope.row.morningStart }} - {{ scope.row.morningEnd }}</span>
        </template>
      </el-table-column>
      <el-table-column prop="morningStart" label="下午" align="center" show-overflow-tooltip>
        <template #default="scope">
          <span>{{ scope.row.afternoonStart }} - {{ scope.row.afternoonEnd }}</span>
        </template>
      </el-table-column>
      <el-table-column prop="date" label="晚上" align="center" show-overflow-tooltip>
        <template #default="scope">
          <span>{{ scope.row.nightStart }} - {{ scope.row.nightEnd }}</span>
        </template>
      </el-table-column>
      <el-table-column label="备注" align="center" show-overflow-tooltip>
        <template #default="scope">
          <span>{{ scope.row.remark ? scope.row.remark : '--' }}</span>
        </template>
      </el-table-column>
      <el-table-column prop="address" label="操作" width="180" align="center">
        <template #default="scope">
          <button text :disabled="isSettingFlag" @click="onEnergyCodeUpdate(scope.row)">修改</button>
          <button text danger :disabled="isSettingFlag" @click="onEnergyCodeDelete(scope.row.id)">删除</button>
        </template>
      </el-table-column>
    </el-table>
    <ems-pagination
      v-show="!loading && total > 0"
      :current-page="queryForm.pageNum"
      :page-sizes="pageSizes"
      @size-change="onPageSizeChange"
      @current-change="onCurrentChange"
      :page-size="queryForm.pageSize"
      :total="total"
    >
    </ems-pagination>
  </div>
  <!-- 弹框 -->
  <AddUpdateDialog
    ref="operateDialogRef"
    @saveSuccess="saveSuccess"
    :isAddFlag="isAddFlag"
    :specialDataDetail="specialDataDetail"
    :settingTreeList="settingTreeList"
  >
  </AddUpdateDialog>
</div>
