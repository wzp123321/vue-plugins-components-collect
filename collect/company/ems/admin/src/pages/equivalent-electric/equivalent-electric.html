<div class="equivalent-electric">
  <page-common title="等效电能源管理" :showSearch="true">
    <template v-slot:pageSearch>
      <div class="equivalent-electric-header">
        <button primary @click="onAddDialogShow">新 增</button>
      </div>
    </template>
    <template v-slot:pageContent>
      <!-- 表格 start -->
      <div v-loading="loading" style="height: calc(100% - 13px)">
        <el-table :data="dataSource" v-show="!loading" style="width: 100%">
          <el-table-column prop="index" label="序号" width="80">
            <template #default="scope"
              >{{ (queryParams.pageNum - 1) * queryParams.pageSize + scope.$index + 1 }}</template
            >
          </el-table-column>
          <el-table-column prop="energyName" label="能源名称" :show-overflow-tooltip="true"> </el-table-column>
          <el-table-column prop="energyCode" label="能耗编码" :show-overflow-tooltip="true"> </el-table-column>
          <el-table-column prop="coefficient" label="等效电折算系数" :show-overflow-tooltip="true"> </el-table-column>
          <el-table-column label="单位" :show-overflow-tooltip="true">
            <template #default="scope"> <span v-html="scope.row.unit"></span> </template>
          </el-table-column>
          <el-table-column prop="status" label="是否参与计算" :show-overflow-tooltip="true">
            <template #default="scope"> {{scope.row.status == '0' ? '否' : '是'}} </template>
          </el-table-column>
          <el-table-column label="操作" width="180">
            <template #default="scope">
              <span class="operate-span mr16" @click="editElectric(scope.row)">编辑</span>
              <span class="delete-span" @click="deleteElectric(scope.row.id)">删除</span>
            </template>
          </el-table-column>
        </el-table>
        <ems-pagination
          v-show="!loading && total>0"
          :current-page="queryParams.pageNum"
          :page-sizes="pageSizes"
          @size-change="onPageSizeChange"
          @current-change="onCurrentChange"
          :page-size="queryParams.pageSize"
          :total="total"
        >
        </ems-pagination>
      </div>
      <!-- 表格 end-->
    </template>
  </page-common>
  <!-- 新增/编辑 弹窗 start -->
  <div v-drag v-if="dialogVisible">
    <el-dialog
      :title="!isAddFlag ? '编辑等效电能源' : '新增等效电能源'"
      v-model="dialogVisible"
      width="620px"
      :before-close="onBeforeClose"
      :close-on-click-modal="false"
    >
      <el-form ref="equivalentElectricRef" :rules="rules" :model="equivalentElectricForm" label-width="115px">
        <el-form-item label="能源名称" prop="energyName">
          <el-input
            v-inputFilter:search
            v-model.trim="equivalentElectricForm.energyName"
            :maxlength="10"
            class="value-input"
            placeholder="请输入能源名称"
          >
          </el-input>
        </el-form-item>
        <el-form-item label="能耗编码" prop="energyCode">
          <el-select v-model="energyCodeValue" class="value-input">
            <el-option v-for="item in energyCodeOptions" :key="item.code" :label="item.CName" :value="item.code">
            </el-option>
          </el-select>
        </el-form-item>
        <el-form-item label="等效电折算系数" prop="coefficient">
          <el-input
            v-model.trim="equivalentElectricForm.coefficient"
            class="value-input"
            placeholder="请输入等效电折算系数"
            v-inputFilter:number="{ integral: 10, decimal: 2 }"
          >
          </el-input>
        </el-form-item>
        <el-form-item label="单位" prop="unit">
          <el-input
            v-inputFilter:search
            v-model.trim="equivalentElectricForm.unit"
            :maxlength="10"
            class="value-input"
            placeholder="请输入单位"
          >
          </el-input>
        </el-form-item>
        <el-form-item label="是否参与计算" prop="status">
          <el-select v-model="statusValue" class="value-input">
            <el-option v-for="item in statusOptions" :key="item.value" :label="item.label" :value="item.value">
            </el-option>
          </el-select>
        </el-form-item>
      </el-form>
      <template #footer>
        <div style="text-align: center">
          <el-button @click="onReset">取消</el-button>
          <el-button type="primary" @click="onSubmit" :loading="submitLoading">确定</el-button>
        </div>
      </template>
    </el-dialog>
  </div>
  <!-- 新增/编辑 弹窗 end -->
</div>
