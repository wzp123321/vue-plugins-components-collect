<div class="group-ranked">
  <page-common :showSearch="true" :isSubHead="true" :title="'分组排名'">
    <template v-slot:pageSearch>
      <!-- 头部 -->
      <el-form :inline="true" :model="queryParams" @submit.native.prevent>
        <el-form-item label="分组名称">
          <el-input v-inputFilter:search v-model="queryParams.name" placeholder="请输入分组名称关键字"> </el-input>
        </el-form-item>
        <el-form-item>
          <el-button type="primary" @click="getAbnormalGroupList">查询</el-button>
          <el-button @click="onReset">重置</el-button>
        </el-form-item>
      </el-form>
    </template>
    <template v-slot:pageSubHead>
      <el-button type="primary" @click="onAddDialogShow" size="small">新 增</el-button>
    </template>
    <template v-slot:pageContent>
      <div class="table-container" v-loading="loading" style="height: calc(100% - 13px)">
        <el-table :data="dataSource" style="width: 100%" v-show="!loading">
          <el-table-column prop="index" label="序号" width="80" align="center">
            <template #default="scope">
              {{ (queryParams.pageNum - 1) * queryParams.pageSize + scope.$index + 1 }}
            </template>
          </el-table-column>
          <el-table-column prop="name" label="分组名称" align="center" show-overflow-tooltip> </el-table-column>
          <el-table-column prop="energyName" label="分类分项" align="center" show-overflow-tooltip> </el-table-column>
          <el-table-column prop="address" label="操作" width="180" align="center">
            <template #default="scope">
              <span class="operate-span mr16" @click="onEnergyCodeUpdate(scope.row)">修改</span>
              <span class="delete-span" @click="onEnergyCodeDelete(scope.row.id)">删除</span>
            </template>
          </el-table-column>
        </el-table>
        <ems-pagination
          v-show="!loading && total>0"
          :current-page="queryParams.pageNum"
          :page-sizes="pageSizes"
          @size-change="onPageSizeChange"
          @current-change="onCurrentChange"
          :page-size="queryParams.pageSize"
          :total="total"
        >
        </ems-pagination>
      </div>
    </template>
  </page-common>
  <!-- 弹框 -->
  <AddUpdateDialog
    ref="addUpdateRef"
    :isAddFlag="isAddFlag"
    :groupDetail="groupDetail"
    :key="nums"
    @success="getAbnormalGroupList"
    :dialogOpen="dialogOpen"
  ></AddUpdateDialog>
</div>
