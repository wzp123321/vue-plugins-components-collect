<div class="benchmarking-library">
  <page-common :title="'对标库'" :showSearch="true">
    <template v-slot:pageSearch>
      <el-form :inline="true" :model="queryFormParams">
        <el-form-item label="对标方式">
          <el-select v-model="queryFormParams.type" placeholder="请选择对标方式">
            <el-option
              v-for="(item, index) in typeList"
              :key="index"
              :label="item.label"
              :value="item.value"
            ></el-option>
          </el-select>
        </el-form-item>
        <el-form-item label="对标对象">
          <el-select
            v-model="queryFormParams.treeId"
            no-data-text="暂无数据"
            placeholder="请选择对标对象"
            @change="selectChange"
          >
            <el-option
              v-for="(item, index) in ObjectList"
              :key="index"
              :label="item.treeName"
              :value="item.id"
              style="width: 207px;"
              :title="item.treeName"
            >
            </el-option>
          </el-select>
        </el-form-item>
        <el-form-item label="数据时间">
          <radio-select-button
            v-model="queryFormParams.benchmarkingType"
            :switchItems="switchSelectData"
            style="display: inline-block !important;"
            @switch-click="switchClick"
          ></radio-select-button>
          <div
            style="display: inline-block !important; margin-left: 5px !important;"
            v-if="queryFormParams.benchmarkingType === '1'"
          >
            <el-date-picker
              :disabledDate="onDateMonthDisabled"
              v-model="queryFormParams.yearOrMonth"
              type="month"
              placeholder="请选择日期"
              prefix-icon="iconfont icon-Calendar"
              clear-icon="iconfont icon-Close-Circle-Fill"
            >
            </el-date-picker>
          </div>
          <div
            style="display: inline-block !important; margin-left: 5px !important;"
            v-if="queryFormParams.benchmarkingType === '2'"
          >
            <el-date-picker
              :disabledDate="onDateYearDisabled"
              v-model="queryFormParams.yearOrMonth"
              type="year"
              placeholder="请选择日期"
              prefix-icon="iconfont icon-Calendar"
              clear-icon="iconfont icon-Close-Circle-Fill"
            >
            </el-date-picker>
          </div>
        </el-form-item>
        <el-form-item label="按以下维度进行对标：">
          <el-checkbox-group v-model="queryFormParams.dimensionList">
            <el-checkbox v-for="item in dimension" :key="item.value" :label="item.value">{{ item.label }}</el-checkbox>
          </el-checkbox-group>
        </el-form-item>
        <el-form-item>
          <el-button type="primary" @click="onSearch">查询</el-button>
          <el-button class="resetBtn" @click="onReset">重置</el-button>
        </el-form-item>
      </el-form>
    </template>
    <template v-slot:pageContent>
      <div class="benchmarking-analysis" v-loading="loading" style="height: 100%;">
        <!-- 对标结果 -->
        <SubContainer v-if="!loading" title="对标结果" :count="chartExplain.count">
          <div
            v-if="
                !showNoData && chartExplain.benchmarkingResultVOList &&
                    chartExplain.benchmarkingResultVOList.length > 0
                "
          >
            <ResultItem
              v-for="(item, index) in chartExplain.benchmarkingResultVOList"
              :key="'result_' + index"
              :text="item.name"
              :status="item.status"
            ></ResultItem>
          </div>
          <no-data v-show="showNoData && chartExplain.benchmarkingResultVOList?.length === 0 && !loading"></no-data>
        </SubContainer>
        <!-- 图标说明 -->
        <SubContainer v-if="!loading" :title="`图标说明`" :count="0">
          <div
            v-if="
                !showNoData && chartExplain.benchmarkingDetailsVOList &&
                    chartExplain.benchmarkingDetailsVOList.length > 0
                "
            class="icon-description"
          >
            <div class="icon-description-left">
              <ExplainItem
                v-if="typeFlage === 1"
                v-for="(item,
                    index) in chartExplain.benchmarkingDetailsVOList"
                :key="'explain_' + index"
                :explainInfo="item"
                :hasLegend="index === 0"
                :radio="radio"
                :benchmarkingObjectName="benchmarkingObjectName"
                :ObjectList="ObjectList"
                :treeId="treeIds"
              ></ExplainItem>
              <ExplainItemMedian
                v-if="typeFlage === 2"
                v-for="(item,
                    index) in chartExplain.benchmarkingDetailsVOList"
                :key="'explain_' + index"
                :explainInfo="item"
                :hasLegend="index === 0"
                :radio="radio"
                :benchmarkingObjectName="benchmarkingObjectName"
                :ObjectList="ObjectList"
                :treeId="treeIds"
              ></ExplainItemMedian>
            </div>
            <div class="icon-description-right">
              <el-radio-group v-model="radio">
                <el-radio
                  class="icon-description-right-radio"
                  v-for="(item,
                      index) in chartExplain.benchmarkingDetailsVOList"
                  :label="item.benchmarkingIndexId"
                  >{{ item.benchmarkingIndexName + '(' + item.benchmarkingIndexUnit + ')' }}</el-radio
                >
              </el-radio-group>
            </div>
          </div>
          <no-data v-show="showNoData && chartExplain.benchmarkingDetailsVOList?.length === 0 && !loading"></no-data>
        </SubContainer>
        <!-- 对标详情 -->
        <SubContainer v-if="!loading" title="对标详情" :count="0">
          <div
            class="flex"
            v-if="
                  !showNoData && chartExplain.benchmarkingDetailsVOList &&
                    chartExplain.benchmarkingDetailsVOList.length > 0
                "
          >
            <BenchMarkingDetailItem
              title="对标项"
              :benchmarkingDetailsVOList="
                    chartExplain.benchmarkingDetailsVOList
                  "
              :type="BENCH_TYPE.TITLE"
              :bgColor="OPTIONS_BG_COLOR"
              :treeId="treeIds"
              style="width: 19%; min-width: 200px;"
            ></BenchMarkingDetailItem>
            <BenchMarkingDetailItem
              title="能耗值"
              :benchmarkingDetailsVOList="
                    chartExplain.benchmarkingDetailsVOList
                  "
              :type="BENCH_TYPE.VALUE"
              :bgColor="VALUES_BG_COLOR"
              :benchmarkingObjectName="benchmarkingObjectName"
              :ObjectList="ObjectList"
              :treeId="treeIds"
              style="width: 12.5%;"
            ></BenchMarkingDetailItem>
            <BenchMarkingDetailItem
              title="最大值"
              :benchmarkingDetailsVOList="
                    chartExplain.benchmarkingDetailsVOList
                  "
              :type="BENCH_TYPE.MAX"
              :bgColor="STANDARDS_BG_COLOR"
              style="width: 12.5%"
              :treeId="treeIds"
            ></BenchMarkingDetailItem>
            <BenchMarkingDetailItem
              v-if="typeFlage === 1"
              title="平均值"
              :benchmarkingDetailsVOList="
                    chartExplain.benchmarkingDetailsVOList
                  "
              :type="BENCH_TYPE.AVERAGE"
              :bgColor="AVERAGES_BG_COLOR"
              style="width: 12.5%"
              :treeId="treeIds"
            ></BenchMarkingDetailItem>
            <BenchMarkingDetailItem
              v-if="typeFlage === 2"
              title="中位数"
              :benchmarkingDetailsVOList="
                    chartExplain.benchmarkingDetailsVOList
                  "
              :type="BENCH_TYPE.MEDIAN"
              :bgColor="AVERAGES_BG_COLOR"
              style="width: 12.5%"
              :treeId="treeIds"
            ></BenchMarkingDetailItem>
            <BenchMarkingDetailItem
              title="最小值"
              :benchmarkingDetailsVOList="
                    chartExplain.benchmarkingDetailsVOList
                  "
              :type="BENCH_TYPE.MIN"
              :bgColor="MINS_BG_COLOR"
              style="width: 12.5%"
              :treeId="treeIds"
            ></BenchMarkingDetailItem>
          </div>
          <no-data v-show="showNoData && chartExplain.benchmarkingDetailsVOList?.length === 0 && !loading"></no-data>
        </SubContainer>
      </div>
    </template>
  </page-common>
</div>
